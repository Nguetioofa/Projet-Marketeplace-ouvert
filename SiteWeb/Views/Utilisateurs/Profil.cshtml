@model UserProfil;
@{
	ViewData["Title"] = "Create";
	//Layout = "~/Views/StatutUser/Create.cshtml";
}



<div class="pd-ltr-20 xs-pd-20-10">
	<div class="min-height-200px">
		<div class="row">
			<div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-30">
				<div class="pd-20 card-box height-100-p">
					<div class="profile-photo">
						<a href="modal"
						   data-toggle="modal"
						   data-target="#modal"
						   class="edit-avatar">
							<i class="fa fa-pencil"></i>
						</a>
						<img src="~/DeskapAdmin/vendors/images/photo1.jpg"
							 alt=""
							 class="avatar-photo" />
						<div class="modal fade"
							 id="modal"
							 tabindex="-1"
							 role="dialog"
							 aria-labelledby="modalLabel"
							 aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered"
								 role="document">
								<div class="modal-content">
									<div class="modal-body pd-5">
										<div class="img-container">
											<img id="image"
												 src="~/DeskapAdmin/vendors/images/photo2.jpg"
												 alt="Picture" />
										</div>
									</div>
									<div class="modal-footer">
										<input type="submit"
											   value="Update"
											   class="btn btn-primary" />
										<button type="button"
												class="btn btn-default"
												data-dismiss="modal">
											Close
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					@Html.Hidden("Id", "70")
@* 					@Html.HiddenFor(model => model.utilisateur.Id)
 *@
				@* 	<h5 class="text-center h5 mb-0"> @Model.utilisateur.Nom  @Model.utilisateur.Prenom
						</h5> *@
			@*		<p class="text-center text-muted font-14">
						Lorem ipsum dolor sit amet
					</p>*@
					<div class="profile-info">
						<h5 class="mb-20 h5 text-blue">Profil</h5>
						<partial name="_DetailUserProfil" model="@Model.utilisateur" />
					</div>
				</div>
			</div>
			<div class="col-xl-8 col-lg-8 col-md-8 col-sm-12 mb-30">
				<div class="card-box height-100-p overflow-hidden">
					<div class="profile-tab height-100-p">
						<div class="tab height-100-p">
							<ul class="nav nav-tabs customtab" role="tablist">
								<li class="nav-item">
									<a class="nav-link active"
									   data-toggle="tab" href="#jouets" role="tab" id="jouetsTab">Jouets</a>
								</li>
								<li class="nav-item">
									<a class="nav-link"
									   data-toggle="tab"
									   href="#annonce"
									   role="tab" id="annoncesTab">Annonces</a>
								</li>
								@if ((await AuthorizationService.AuthorizeAsync(User, "ProfileAccessPolicy")).Succeeded)
								{
									<li class="nav-item">
										<a class="nav-link" data-toggle="tab"
										   href="#echange"
										   role="tab">Echanges</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" data-toggle="tab"
										   href="#achat" role="tab">Achats</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" data-toggle="tab"
										   href="#editer" role="tab">Editer le profil</a>
									</li>
								}

							</ul>
							<div class="tab-content">
								<div class="tab-pane fade show active" id="jouets"  role="tabpanel">
										@* liste jouets*@

											<div class="container margin_30" id="listejouets"> </div>

									
								</div>
								@* liste annonces*@
								<div class="tab-pane fade show" id="annonce" role="tabpanel">
									<div class="container margin_30" id="listeAnnonces"> </div>

								</div>
								<div class="tab-pane fade" id="echange" role="tabpanel">
									<partial name="_EchangeList" />
								</div>
								<div class="tab-pane fade" id="achat" role="tabpanel">
									<partial name="_AchatList" />
								</div>
								<div class="tab-pane fade height-100-p" id="editer">
@* 									<partial name="_EditerProfil" />
 *@								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts{
	<script src="~/DeskapAdmin/vendors//scripts/core.js"></script>


	
	<script>
		//list jouets
		$(document).ready(function () {


			$('#jouetsTab').click(function () {
				$('#listejouets').empty();
				var id = $("input[name='Id']").val();
				alert(id)

				$.ajax({
					url: '/Jouets/GetJouetProfil',
					type: 'GET',
					data: { id: 3 },
					success: function (data) {
						var html = '';
						for (var i = 0; i < data.length; i++) {
							var jouet = data[i];
							html += '<div class="col-6 col-md-4 col-xl-3">';
							html += '<div class="grid_item">';
							html += '<span class="ribbon new">Nouveau</span>';
							html += '<figure>';
							html += '<a href="/Jouets/Details/' + jouet.id + '">';
							if (jouet.photo != null) {
								html += '<img class="img-fluid lazy" src="' + jouet.photo.urlP + '" alt="' + jouet.nom + '">';
							} else {
								html += '<img class="img-fluid lazy" src="/AllaiaEcommerce/img/products/product_placeholder_square_medium.jpg" alt="' + jouet.nom + '">';
							}
							html += '</a>';
							html += '</figure>';
							html += '<a href="/Jouets/Details/' + jouet.Id + '">';
							html += '<h3>' + jouet.nom + '</h3>';
							html += '</a>';
							html += '<div class="price_box">';
							html += '<span class="new_price">' + jouet.prix + ' Fcfa</span>';
							html += '</div>';
							html += '<ul>';
							if (jouet.acceptAchat) {
								html += '<li><a href="#0" class="tooltip-1" data-bs-toggle="tooltip" data-bs-placement="left" title="Achater"><i class="ti-shopping-cart"></i><span>Achater</span></a></li>';
							}
							if (jouet.acceptTroc) {
								html += '<li><a href="#0" class="tooltip-1" data-bs-toggle="tooltip" data-bs-placement="left" title="Echanger"><i class="ti-control-shuffle"></i><span>Echanger</span></a></li>';
							}
							html += '</ul>';
							html += '</div>';
							html += '</div>';
						}

						$('#listejouets').append(html);
					}
				});
			});

		});

	</script>

	<script>
		//list annonces
		$(document).ready(function () {


			$('#annoncesTab').click(function () {
				$('#listeAnnonces').empty();

				var id = $("input[name='Id']").val();
				alert(id)

				$.ajax({
					url: '/Annonces/AnnoncesUtilisateur',
					type: 'GET',
					data: { id: 3 },
					success: function (data) {
						var html = '';
						for (var i = 0; i < data.length; i++) {
							var annonce = data[i];
							html += '<div class="row row_item">';
							html += '<div class="col-sm-4">';
							html += '<figure>';
							html += '<a href="/Annonces/Details/' + annonce.id + '">';
							if (annonce.photo == null) {
								//html += '<img class="img-fluid lazy" src="/AllaiaEcommerce/img/products/product_placeholder_square_medium.jpg" data-src="img/products/shoes/6.jpg" alt="">';
							} else {
								//html += '<img class="img-fluid lazy" src="' + annonce.photo.prlP + '" alt="' + annonce.photo.nomPhoto + '">';
							}
							html += '</a>';
							html += '</figure>';
							html += '</div>';
							html += '<div class="col-sm-8">';
							html += '<ul>';
							html += '<li>';
							html += '<div class="d-inline-block mb-2 text-primary">';
							html += '<a href="/Utilisateurs/Profil/' + annonce.idUtilisateur + '">' + annonce.utilisateur.nom + ' ' + annonce.utilisateur.prenom + '</a>';
							html += '</div>';
							html += '</li>';
							html += '<li>' + annonce.dateAnnonce + '</li>';
							html += '</ul>';
							html += '<a href="/Annonces/Details/' + annonce.id + '">';
							html += '<h3>' + annonce.titre + '</h3>';
							html += '</a>';
							html += '<p>';
							if (annonce.descriptionAnnonce.length > 238) {
								html += annonce.descriptionAnnonce.substring(0, 237);
								html += '<a href="/Annonces/Details/' + annonce.id + '" class="stretched-link text-primary"> ...voir plus</a>';
							} else {
								html += annonce.descriptionAnnonce;
							}
							html += '</p>';
							html += '<ul>';
							html += '<li>';
							html += '<a class="btn_1" href="/Utilisateurs/Profil/' + annonce.idUtilisateur + '">Contacter</a>';
							html += '</li>';
							html += '<li>';
							html += '<a class="btn_1" href="/Annonces/Details/' + annonce.id + '">Commenter</a>';
							html += '</li>';
							html += '</ul>';
							html += '</div>';
							html += '</div>';
						}
						// Ajoutez le HTML généré à la page
						$('#listeAnnonces').html(html);
					}
				});

			});

		});

	</script>

}