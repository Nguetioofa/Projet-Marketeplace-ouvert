@using SiteWeb.Services.Interfaces
@using ModelsLibrary.Models.Commentaires
@inject ICommentaireService _commentaireService
@model ModelsLibrary.Models.Annonces.AnnoncesDetailModel


@{
	ViewData["Title"] = "Details";
	// Layout = "~/Views/Shared/_HomePageLayout.cshtml";
}

<div class="container margin_30">
	<div class="row">
		<div class="col-md-6">
			<div class="all">
				<div class="slider">
					<div class="owl-carousel owl-theme main">
						@if (Model.listPhoto is not null)
						{
							@foreach (var photo in Model.listPhoto)
							{
								<div style="background-image: url(@photo.UrlP.Replace("\\","/"));" class="item-box"></div>
							}
						}

					</div>
					<div class="left nonl"><i class="ti-angle-left"></i></div>
					<div class="right"><i class="ti-angle-right"></i></div>
				</div>
				<div class="slider-two">
					<div class="owl-carousel owl-theme thumbs">

						@if (Model.listPhoto is not null)
						{
							bool isFirst = true;
							@foreach (var photo in Model.listPhoto)
							{
								if (isFirst)
								{
									isFirst = false;
									<div style="background-image: url(@photo.UrlP.Replace("\\","/"))" class="item active"></div>
								}
								<div style="background-image: url(@photo.UrlP.Replace("\\","/"))" class="item"></div>
							}
						}
					</div>
					<div class="left-t nonl-t"></div>
					<div class="right-t"></div>
				</div>
			</div>
		</div>
		<div class="col-md-6">

			<div class="prod_info">
				<h1>@Model.Titre</h1>

				<p>
					<strong>
						Annonceur:
						<a class="new_price" asp-controller="Utilisateurs" asp-action="Profil" asp-route-id="@Model.utilisateur.Id">
							@Model.utilisateur.Nom @Model.utilisateur.Prenom
						</a>
					</strong>
					<br>
					<strong>Date de publication: @Model.DateAnnonce</strong><br>
					<strong>Description: </strong>
					@Model.DescriptionAnnonce
				</p>

				<br>
			</div>
		</div>
	</div>
</div>

@{

	List<CommentaireL> listCommentaires = await _commentaireService.GetCommentaireByIdAnnonce(Model.Id);

}

@{
	ModelPatialCommentaire modelPatialCommentaire = new ModelPatialCommentaire()
			{
				Id = Model.Id,
				TypeCommantaire = "annonce",
				listCommentaires = listCommentaires
			};

	<partial name="_Commentaires" model="modelPatialCommentaire" />

}
@section Scripts{
	<script src="~/AllaiaEcommerce/js/carousel_with_thumbs.js"></script>
	<script src="~/js/site.js"> </script>
}
