@model List<UserIdName>
@{
    ViewData["Title"] = "Index";
    //Layout = "~/Views/Shared/_HomePageLayout.cshtml";
}

<div class="container">
    <div class="row justify-content-center" style="display: flex; justify-content: center;">
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">Contacts</div>
                <ul class="list-group list-group-flush" id="contact-list">
                    @if (Model is not null)
                    {
                        @foreach (var item in Model)
                        {
            <li class="list-group-item" data-id="@item.Id">@item.Name</li>
                        }
                    }

                </ul>
            </div>
        </div>
        <div class="col-md-8">
            <div class="card">
                <div class="card-header" >Conversation avec John Doe</div>
                <div class="card-body" id="message-list-container">
                    <ul id="message-list">
                        <!-- Liste des messages à afficher -->
                    </ul>
                </div>
                <div class="card-footer">
                    <form id="message-form">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Votre message..." id="messageInput" />
                            <div class="input-group-append">

                                <input class="btn btn-primary" id="sendButton" type="button" value="Envoyer" />
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript -->


<!-- CSS -->
<style>
    /* Styles pour les messages */
    .message {
        margin: 10px;
        padding: 10px;
        border-radius: 10px;
    }

    .received {
        background-color: #f1f0f0;
    }

    .sent {
        background-color: #007bff;
        color: #fff;
        align-self: flex-end;
    }

    /* Styles pour les notifications */
    .notification {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px 20px;
        border-radius: 5px;
        color: #fff;
    }

        .notification.success {
            background-color: #28a745;
        }

        .notification.error {
            background-color: #dc3545;
        }

    #contact-list .active {
        background-color: #007bff;
        color: #fff;
    }

    #message-list-container {
        max-height: 300px;
        overflow-y: auto;
    }
    
        @{
            int idUser = Convert.ToInt32(User.FindFirst(System.Security.Claims.ClaimTypes.Name)?.Value);
        }
</style>

@*    
 *@
         <script src="~/js/signalr/dist/browser/signalr.js"></script>

    <script>
        //////////////////////////////////////////////////////////////////////
                  const contactList = document.getElementById('contact-list');

                  var idUser = parseInt(@idUser);

          var contactId = 0;

         
    </script>
         <script src="~/js/chat.js"></script>

